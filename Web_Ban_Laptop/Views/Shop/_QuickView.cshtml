@model Web_Ban_Laptop.Models.Product

<div class="row">
    <div class="col-md-6">
        <div class="quick-view-image">
            <img src="@(Model.Thumbnail ?? Model.ProductImages?.FirstOrDefault()?.ImageUrl ?? "https://images.unsplash.com/photo-1496181133206-80ce9b88a853?w=500&h=500&fit=crop")" 
                 alt="@Model.ProductName" style="width: 100%; border-radius: 8px;">
        </div>
    </div>
    <div class="col-md-6">
        <h3 style="color: var(--text); margin-bottom: 15px;">@Model.ProductName</h3>
        
        <div class="product-price" style="margin-bottom: 20px;">
            <span class="price-current" style="font-size: 28px;">@((Model.DiscountPrice ?? Model.Price).ToString("N0"))₫</span>
            @if (Model.DiscountPrice > 0 && Model.DiscountPrice < Model.Price)
            {
                <span class="price-old" style="font-size: 18px;">@Model.Price.ToString("N0")₫</span>
            }
        </div>

        @if (!string.IsNullOrEmpty(Model.ShortDescription))
        {
            <p style="color: var(--text-muted); margin-bottom: 20px;">@Model.ShortDescription</p>
        }

        @if (Model.ProductDetail != null)
        {
            <div style="margin-bottom: 20px;">
                <h5 style="color: var(--text); margin-bottom: 10px;">Thông số nổi bật:</h5>
                <ul style="color: var(--text-muted); padding-left: 20px;">
                    @if (!string.IsNullOrEmpty(Model.ProductDetail.Cpu))
                    {
                        <li>CPU: @Model.ProductDetail.Cpu</li>
                    }
                    @if (!string.IsNullOrEmpty(Model.ProductDetail.Ram))
                    {
                        <li>RAM: @Model.ProductDetail.Ram</li>
                    }
                    @if (!string.IsNullOrEmpty(Model.ProductDetail.HardDrive))
                    {
                        <li>Ổ cứng: @Model.ProductDetail.HardDrive</li>
                    }
                    @if (!string.IsNullOrEmpty(Model.ProductDetail.Screen))
                    {
                        <li>Màn hình: @Model.ProductDetail.Screen</li>
                    }
                </ul>
            </div>
        }

        <div style="display: flex; gap: 10px; margin-top: 30px;">
            <a href="@Url.Action("Details", "Product", new { id = Model.ProductId })" 
               class="btn btn-primary" style="flex: 1; padding: 12px;">
                <i class="fas fa-eye me-2"></i>Xem chi tiết
            </a>
            <button onclick="addToCartQuick(@Model.ProductId)" class="btn btn-primary" style="flex: 1; padding: 12px;">
                <i class="fas fa-shopping-cart me-2"></i>Thêm vào giỏ
            </button>
        </div>
    </div>
</div>

<script>
    function addToCartQuick(productId) {
        $.ajax({
            url: '@Url.Action("AddToCart", "Cart")',
            type: 'POST',
            data: { productId: productId, quantity: 1 },
            success: function(response) {
                if (response.success) {
                    $('#quickViewModal').modal('hide');
                    showNotification('Đã thêm vào giỏ hàng!');
                    location.reload();
                }
            }
        });
    }
</script>

